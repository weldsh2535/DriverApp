!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(c){o=!0,i=c}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+cje":function(t,e,r){"use strict";r.d(e,"a",function(){return d});var n=r("HDdC"),o=r("XEKg"),i=r("5Jak"),a=r("/GcI"),u=r("cxbk"),c=r("fXoL"),l=r("tk/3"),d=function(){var t=function(){function t(e){s(this,t),this.http=e,this.APIURL=u.a.apiURL}return f(t,[{key:"create",value:function(t){return this.http.post(this.APIURL+"/restaurant",t)}},{key:"getAllRestaurant",value:function(){return this.http.get(this.APIURL+"/restaurant")}},{key:"updateRestaurant",value:function(t){return this.http.put(this.APIURL+"/restaurant/",t)}},{key:"removeRestaurant",value:function(t){return this.http.delete(this.APIURL+"/restaurant/"+t).toPromise()}},{key:"handleError",value:function(t){return n.a.throw(400===t.status?new o.a(t.json()):404===t.status?new i.a:new a.a(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.cc(l.a))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"/GcI":function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function t(e){s(this,t),this.originalError=e}},"5Jak":function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(t){o(r,t);var e=a(r);function r(){return s(this,r),e.apply(this,arguments)}return r}(r("/GcI").a)},VNSQ:function(r,n,o){"use strict";o.d(n,"a",function(){return d});var i=o("2Vo4"),a=o("cxbk"),u=o("fXoL"),c=o("tk/3"),l=o("ldse"),d=function(){var r=function(){function r(t,e){s(this,r),this.http=t,this.sharedService=e,this.cart=[],this.cartItemCount=new i.a(0),this.RestaurantId=new i.a({}),this.orderStatus=new i.a({}),this.order=[],this.orderItemCount=new i.a(0),this.APIURL=a.a.apiURL}return f(r,[{key:"create",value:function(t){return this.http.post(this.APIURL+"/order",t)}},{key:"getAllOrder",value:function(){return this.http.get(this.APIURL+"/order")}},{key:"getOrderByDate",value:function(t){return this.http.get(this.APIURL+"/order/"+t)}},{key:"updateOrder",value:function(t){return this.http.put(this.APIURL+"/order/",t)}},{key:"removeOrder",value:function(t){return this.http.delete(this.APIURL+"/order/"+t).toPromise()}},{key:"updateOrderStatus",value:function(t){return this.http.put(this.APIURL+"/orderstatus/",t)}},{key:"getCart",value:function(){return this.cart}},{key:"getOrders",value:function(){return this.order}},{key:"getCartItemCount",value:function(){return this.cartItemCount}},{key:"getOrderItemCount",value:function(){return this.orderItemCount}},{key:"getRestaurantId",value:function(){return this.RestaurantId}},{key:"getOrderStatus",value:function(){return this.orderStatus}},{key:"addOrder",value:function(t){var e=this;this.order=[],this.amount=0,this.order.forEach(function(t){var r=e.order.indexOf(function(e){return e.orderDetailsId===t.orderDetailsId});e.order.splice(r,1)}),this.orderItemCount.next(0),t.forEach(function(t){e.amount=e.amount+t.amount,e.order.push({CookingTime:t.CookingTime,DeliveryTime:t.DeliveryTime,Description:t.Description,Name:t.Name,Price:t.Price,amount:t.amount,categoryId:t.categoryId,id:t.Food,picture:t.picture,restaurantId:t.restaurantId,type:t.type,orderDetailsId:t.orderDetailsId})}),this.orderItemCount.next(this.orderItemCount.value+this.amount)}},{key:"addProduct",value:function(t){var r,n=!1,o=e(this.cart);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.id===t.id){i.amount+=1,n=!0;break}}}catch(a){o.e(a)}finally{o.f()}n||(t.amount=1,this.cart.push(t)),this.cartItemCount.next(this.cartItemCount.value+1)}},{key:"decreaseProduct",value:function(r){var n,o=e(this.cart.entries());try{for(o.s();!(n=o.n()).done;){var i=t(n.value,2),a=i[0],u=i[1];u.id===r.id&&(u.amount-=1,0==u.amount&&this.cart.splice(a,1))}}catch(c){o.e(c)}finally{o.f()}this.cartItemCount.next(this.cartItemCount.value-1)}},{key:"removeProduct",value:function(r){var n,o=e(this.cart.entries());try{for(o.s();!(n=o.n()).done;){var i=t(n.value,2),a=i[0],u=i[1];u.id===r.id&&(this.cartItemCount.next(this.cartItemCount.value-u.amount),this.cart.splice(a,1))}}catch(c){o.e(c)}finally{o.f()}}}]),r}();return r.\u0275fac=function(t){return new(t||r)(u.cc(c.a),u.cc(l.a))},r.\u0275prov=u.Mb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},XEKg:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(t){o(r,t);var e=a(r);function r(){return s(this,r),e.apply(this,arguments)}return r}(r("/GcI").a)},ldse:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r("2Vo4"),o=r("fXoL"),i=function(){var t=function(){function t(){s(this,t),this.restaurant=new n.a({}),this.status=new n.a({}),this.location=new n.a({}),this.orderId=new n.a({}),this.RestaurantLocation=new n.a({}),this.resId=new n.a({}),this.listOfCatagoryFilter=new n.a({}),this.deriverId=new n.a({}),this.customerId=new n.a({}),this.customerName=new n.a({})}return f(t,[{key:"getMenuFilter",value:function(){return this.listOfCatagoryFilter}},{key:"getLocation",value:function(){return this.location}},{key:"getStatus",value:function(){return this.status}},{key:"getRestaurantLocation",value:function(){return this.RestaurantLocation}},{key:"getRestaurantId",value:function(){return this.resId}},{key:"getDriverId",value:function(){return this.deriverId}},{key:"getCustomerId",value:function(){return this.customerId}},{key:"getCustomerName",value:function(){return this.customerName}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"piv+":function(t,e,r){"use strict";r.r(e),r.d(e,"OrderHistoryPageModule",function(){return C});var n=r("ofXK"),o=r("3Pt+"),i=r("TEn/"),a=r("tyNb"),u=r("mrSG"),c=r("fXoL"),l=r("VNSQ"),d=r("+cje"),h=r("8D9V"),b=r("Dkj+"),v=r("ldse");function m(t,e){if(1&t&&(c.Vb(0,"ion-badge"),c.Ec(1),c.jc(2,"async"),c.Ub()),2&t){var r=c.ic();c.Eb(1),c.Fc(c.kc(2,1,r.cartItemCount))}}function y(t,e){if(1&t&&(c.Vb(0,"ion-item",13),c.Vb(1,"ion-grid"),c.Vb(2,"ion-row",14),c.Vb(3,"ion-col",15),c.Vb(4,"ion-button",16),c.Rb(5,"ion-icon",17),c.Ub(),c.Ub(),c.Vb(6,"ion-col",18),c.Ec(7),c.Ub(),c.Vb(8,"ion-col",15),c.Vb(9,"ion-button",16),c.Rb(10,"ion-icon",19),c.Ub(),c.Ub(),c.Vb(11,"ion-col",20),c.Vb(12,"ion-button",16),c.Rb(13,"ion-icon",21),c.Ub(),c.Ub(),c.Ub(),c.Vb(14,"ion-row"),c.Vb(15,"ion-col",22),c.Vb(16,"b"),c.Ec(17),c.Ub(),c.Ub(),c.Vb(18,"ion-col",23),c.Vb(19,"b"),c.Ec(20),c.jc(21,"currency"),c.Ub(),c.Ub(),c.Vb(22,"ion-col",12),c.Ec(23),c.jc(24,"currency"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t){var r=e.$implicit;c.Eb(7),c.Gc(" ",r.amount," "),c.Eb(10),c.Fc(r.Name),c.Eb(3),c.Fc(c.lc(21,4,r.Price,"ETB")),c.Eb(3),c.Gc(" ",c.lc(24,7,r.amount*r.Price,"ETB")," ")}}var p,g,I,k=[{path:"",component:(p=function(){function t(e,r,n,o,i,a,u,c,l){s(this,t),this.modalCtrl=e,this.alertCtrl=r,this.orderService=n,this.fb=o,this.router=i,this.restaurantService=a,this.orderDetailService=u,this.foodService=c,this.sharedService=l,this.cart=[],this.regform=this.fb.group({}),this.currentDate=(new Date).toUTCString(),this.minDate=(new Date).toISOString(),this.maxDate=(new Date).toISOString()}return f(t,[{key:"ngOnInit",value:function(){this.regform=this.fb.group({transactionType:[""],DeliveryDate:[""],DeliveryTime:[""],DeliveryAddress:[""]});var t=new Date;t.setDate(t.getDate()-5),this.minDate=t.toISOString(),(t=new Date).setDate(t.getDate()+5),this.maxDate=t.toISOString(),this.cart=this.orderService.getOrders(),this.status=this.sharedService.getStatus().value,console.log(this.status),this.cartItemCount=this.orderService.getOrderItemCount(),this.id=this.orderService.getRestaurantId().value,this.getRestaurant(),this.getFood(),this.readNOId()}},{key:"getRestaurant",value:function(){var t=this;this.restaurantService.getAllRestaurant().subscribe(function(e){t.listOfRestaurant=e})}},{key:"getFood",value:function(){var t=this;this.foodService.getAllFood().subscribe(function(e){t.listOfFood=e})}},{key:"readNOId",value:function(){var t=this,e=0;this.orderService.getAllOrder().subscribe(function(r){e=0==r.length?1:r.length+1,t.orderNo=+e})}},{key:"decreaseCartItem",value:function(t){this.orderService.decreaseProduct(t)}},{key:"increaseCartItem",value:function(t){this.orderService.addProduct(t)}},{key:"removeCartItem",value:function(t){this.presentAlertConfirm(t)}},{key:"getTotal",value:function(){return this.cart.reduce(function(t,e){return t+e.amount*e.Price},0)}},{key:"close",value:function(){this.modalCtrl.dismiss()}},{key:"order",value:function(t){var e=this;this.Total=0,t.forEach(function(t){e.restaurantId=t.restaurantId,e.Total=e.Total+t.Price*t.amount,e.orderDetailService.create({OrderId:e.orderNo,Restaurant:t.restaurantId,Food:t.id,Qty:t.amount,Price:t.Price})});var r={DateTime:this.regform.get("DeliveryDate").value,Customer:localStorage.getItem("userId"),Location:this.listOfRestaurant.find(function(t){return t.id==e.restaurantId}).location,OrderStatus:this.regform.get("transactionType").value,Total:this.Total,orderNo:this.orderNo,Driver:null,Vehicle:null,orderLocation:null};this.orderService.create(r)}},{key:"presentAlertConfirm",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"Clear cart !",message:"<strong>Are you sure you want to remove all items in your cart ?</strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"OK",handler:function(){n.orderService.removeProduct(t)}}]});case 2:return r=e.sent,e.next=5,r.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"backPage",value:function(){this.router.navigate("driver"==this.status?["/menu/driver-home"]:"restaurant-home"==this.status?["/menu/restaurant-home"]:"restaurant-history"==this.status?["/menu/restaurant-history"]:["/menu/order"])}}]),t}(),p.\u0275fac=function(t){return new(t||p)(c.Qb(i.O),c.Qb(i.a),c.Qb(l.a),c.Qb(o.b),c.Qb(a.g),c.Qb(d.a),c.Qb(h.a),c.Qb(b.a),c.Qb(v.a))},p.\u0275cmp=c.Kb({type:p,selectors:[["app-order-history"]],decls:23,vars:6,consts:[["color","light"],["slot","start"],["fill","solid","shape","round","color","light",3,"click"],["slot","icon-only","name","arrow-back","color","primary"],[2,"text-align","center"],["slot","end"],[4,"ngIf"],["slot","icon-only","name","cart",1,"cart-icon"],["fullscreen",""],[1,"ion-padding"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["size","9"],["size","3",1,"ion-text-end"],[1,"ion-text-wrap"],[1,"ion-align-items-center"],["size","2",1,"ion-align-self-center"],["color","medium","fill","clear"],["name","remove-circle","slot","icon-only"],["size","1",1,"ion-align-self-center"],["name","add-circle","slot","icon-only"],["size","2","offset","5"],["name","close-circle","slot","icon-only"],["size","5"],["size","4"]],template:function(t,e){1&t&&(c.Vb(0,"ion-header"),c.Vb(1,"ion-toolbar",0),c.Vb(2,"ion-buttons",1),c.Vb(3,"ion-button",2),c.gc("click",function(){return e.backPage()}),c.Rb(4,"ion-icon",3),c.Ub(),c.Ub(),c.Vb(5,"ion-title",4),c.Ec(6,"Detail orders"),c.Ub(),c.Vb(7,"ion-buttons",5),c.Vb(8,"ion-button"),c.Cc(9,m,3,3,"ion-badge",6),c.Rb(10,"ion-icon",7),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(11,"ion-content",8),c.Vb(12,"div",9),c.Vb(13,"ion-list"),c.Cc(14,y,25,10,"ion-item",10),c.Vb(15,"ion-item"),c.Vb(16,"ion-grid"),c.Vb(17,"ion-row"),c.Vb(18,"ion-col",11),c.Ec(19," Total: "),c.Ub(),c.Vb(20,"ion-col",12),c.Ec(21),c.jc(22,"currency"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Eb(9),c.oc("ngIf",e.cart.length>0),c.Eb(5),c.oc("ngForOf",e.cart),c.Eb(7),c.Gc(" ",c.lc(22,3,e.getTotal(),"ETB")," "))},directives:[i.p,i.K,i.i,i.h,i.q,i.I,n.n,i.k,i.v,n.m,i.t,i.o,i.C,i.j,i.g],pipes:[n.d,n.b],styles:["ion-badge[_ngcontent-%COMP%]{color:#fff;position:absolute;top:-9px;right:2px;border-radius:100%}.cart-icon[_ngcontent-%COMP%]{font-size:50px}.cart-length[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;top:18px;left:25px;font-weight:600;font-size:1em;min-width:25px;z-index:10}"]}),p)}],w=((I=function t(){s(this,t)}).\u0275fac=function(t){return new(t||I)},I.\u0275mod=c.Ob({type:I}),I.\u0275inj=c.Nb({imports:[[a.j.forChild(k)],a.j]}),I),C=((g=function t(){s(this,t)}).\u0275fac=function(t){return new(t||g)},g.\u0275mod=c.Ob({type:g}),g.\u0275inj=c.Nb({imports:[[n.c,o.e,i.L,w,o.m]]}),g)}}])}();
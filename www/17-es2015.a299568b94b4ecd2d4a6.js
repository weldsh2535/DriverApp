(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3tpA":function(e,t,s){"use strict";s.r(t),s.d(t,"MessagePageModule",function(){return I});var n=s("ofXK"),r=s("3Pt+"),i=s("TEn/"),o=s("tyNb"),a=s("mrSG"),c=s("fXoL"),d=s("ldse"),g=s("cxbk"),u=s("tk/3");let b=(()=>{class e{constructor(e){this.http=e,this.APIURL=g.a.apiURL}create(e){return this.http.post(this.APIURL+"/message",e)}getAllMessage(){return this.http.get(this.APIURL+"/message")}updateMessage(e){return this.http.put(this.APIURL+"/message/",e)}removeMessage(e){return this.http.delete(this.APIURL+"/message/"+e).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(c.cc(u.a))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function l(e,t){if(1&e&&(c.Vb(0,"ion-col",12),c.Vb(1,"b"),c.Ec(2),c.Ub(),c.Vb(3,"span"),c.Ec(4),c.Ub(),c.Vb(5,"div",13),c.Rb(6,"br"),c.Ec(7),c.jc(8,"date"),c.Ub(),c.Ub()),2&e){const e=c.ic().$implicit;c.Eb(2),c.Fc(e.user),c.Eb(2),c.Fc(e.msgcontent),c.Eb(3),c.Gc(" ",c.lc(8,3,e.date,"short")," ")}}function m(e,t){if(1&e&&(c.Vb(0,"ion-col",14),c.Vb(1,"b"),c.Ec(2),c.Ub(),c.Vb(3,"span"),c.Ec(4),c.Ub(),c.Vb(5,"div",13),c.Rb(6,"br"),c.Ec(7),c.jc(8,"date"),c.Ub(),c.Ub()),2&e){const e=c.ic().$implicit;c.Eb(2),c.Fc(e.user),c.Eb(2),c.Fc(e.msgcontent),c.Eb(3),c.Gc(" ",c.lc(8,3,e.date,"short")," ")}}function h(e,t){if(1&e&&(c.Vb(0,"ion-row"),c.Cc(1,l,9,6,"ion-col",10),c.Cc(2,m,9,6,"ion-col",11),c.Ub()),2&e){const e=t.$implicit,s=c.ic();c.Eb(1),c.oc("ngIf",s.currentUser!==e.sessionId),c.Eb(1),c.oc("ngIf",s.currentUser===e.sessionId)}}const f=[{path:"",component:(()=>{class e{constructor(e,t){this.sharedService=e,this.messageService=t}ngOnInit(){this.customerName=this.sharedService.getCustomerName().value,this.driverId=this.sharedService.getDriverId().value,this.customerId=this.sharedService.getCustomerId().value,this.currentUser=this.customerId,this.getMessage()}getMessage(){this.messageService.getAllMessage().subscribe(e=>Object(a.a)(this,void 0,void 0,function*(){let t=yield e.filter(e=>e.driverId==localStorage.getItem("userId")&&e.driverId==this.driverId&&e.userId==this.customerId);this.listOfMessage=t.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),this.currentUser=localStorage.getItem("userId")}))}sendMessage(){let e={msgcontent:this.newMsg,date:new Date,userId:this.customerId,driverId:this.driverId,sessionId:localStorage.getItem("userId")};this.listOfMessage.push(e),this.listOfMessage.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),this.messageService.create(e).subscribe(e=>{console.log(e.toString()),this.getMessage()}),this.newMsg="",setTimeout(()=>{this.content.scrollToBottom(200)})}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(d.a),c.Qb(b))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-message"]],viewQuery:function(e,t){if(1&e&&c.Ic(i.k,1),2&e){let e;c.uc(e=c.hc())&&(t.content=e.first)}},decls:17,vars:4,consts:[["color","light"],["slot","start"],["defaultHref","detail"],[4,"ngFor","ngForOf"],["align-items-center","","no-padding",""],["size","10"],["autosize","","maxRows","4",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear","color","primary",1,"msg-btn",3,"disabled","click"],["name","send-outline"],["size","9","class","message other-message",4,"ngIf"],["offset","3","size","9","class","message my-message",4,"ngIf"],["size","9",1,"message","other-message"],["text-right","",1,"time"],["offset","3","size","9",1,"message","my-message"]],template:function(e,t){1&e&&(c.Vb(0,"ion-header"),c.Vb(1,"ion-toolbar",0),c.Vb(2,"ion-buttons",1),c.Rb(3,"ion-back-button",2),c.Ub(),c.Vb(4,"ion-title"),c.Ec(5),c.Ub(),c.Ub(),c.Ub(),c.Vb(6,"ion-content"),c.Vb(7,"ion-grid"),c.Cc(8,h,3,2,"ion-row",3),c.Ub(),c.Vb(9,"ion-footer"),c.Vb(10,"ion-toolbar"),c.Vb(11,"ion-row",4),c.Vb(12,"ion-col",5),c.Vb(13,"textarea",6),c.gc("ngModelChange",function(e){return t.newMsg=e}),c.Ub(),c.Ub(),c.Vb(14,"ion-col",7),c.Vb(15,"ion-button",8),c.gc("click",function(){return t.sendMessage()}),c.Rb(16,"ion-icon",9),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Eb(5),c.Fc(t.customerName),c.Eb(3),c.oc("ngForOf",t.listOfMessage),c.Eb(5),c.oc("ngModel",t.newMsg),c.Eb(2),c.oc("disabled",""===t.newMsg))},directives:[i.p,i.K,i.i,i.e,i.f,i.I,i.k,i.o,n.m,i.n,i.C,i.j,r.a,r.i,r.k,i.h,i.q,n.n],pipes:[n.f],styles:[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em;margin-top:10px}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({imports:[[o.j.forChild(f)],o.j]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({imports:[[n.c,r.e,i.L,p,r.m]]}),e})()},ldse:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s("2Vo4"),r=s("fXoL");let i=(()=>{class e{constructor(){this.restaurant=new n.a({}),this.status=new n.a({}),this.location=new n.a({}),this.orderId=new n.a({}),this.RestaurantLocation=new n.a({}),this.resId=new n.a({}),this.listOfCatagoryFilter=new n.a({}),this.deriverId=new n.a({}),this.customerId=new n.a({}),this.customerName=new n.a({})}getMenuFilter(){return this.listOfCatagoryFilter}getLocation(){return this.location}getStatus(){return this.status}getRestaurantLocation(){return this.RestaurantLocation}getRestaurantId(){return this.resId}getDriverId(){return this.deriverId}getCustomerId(){return this.customerId}getCustomerName(){return this.customerName}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
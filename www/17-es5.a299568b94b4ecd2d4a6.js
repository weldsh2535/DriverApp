!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3tpA":function(t,s,r){"use strict";r.r(s),r.d(s,"MessagePageModule",function(){return U});var i,o=r("ofXK"),a=r("3Pt+"),c=r("TEn/"),u=r("tyNb"),d=r("mrSG"),g=r("fXoL"),f=r("ldse"),l=r("cxbk"),b=r("tk/3"),m=((i=function(){function t(n){e(this,t),this.http=n,this.APIURL=l.a.apiURL}return n(t,[{key:"create",value:function(e){return this.http.post(this.APIURL+"/message",e)}},{key:"getAllMessage",value:function(){return this.http.get(this.APIURL+"/message")}},{key:"updateMessage",value:function(e){return this.http.put(this.APIURL+"/message/",e)}},{key:"removeMessage",value:function(e){return this.http.delete(this.APIURL+"/message/"+e).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||i)(g.cc(b.a))},i.\u0275prov=g.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function h(e,t){if(1&e&&(g.Vb(0,"ion-col",12),g.Vb(1,"b"),g.Ec(2),g.Ub(),g.Vb(3,"span"),g.Ec(4),g.Ub(),g.Vb(5,"div",13),g.Rb(6,"br"),g.Ec(7),g.jc(8,"date"),g.Ub(),g.Ub()),2&e){var n=g.ic().$implicit;g.Eb(2),g.Fc(n.user),g.Eb(2),g.Fc(n.msgcontent),g.Eb(3),g.Gc(" ",g.lc(8,3,n.date,"short")," ")}}function p(e,t){if(1&e&&(g.Vb(0,"ion-col",14),g.Vb(1,"b"),g.Ec(2),g.Ub(),g.Vb(3,"span"),g.Ec(4),g.Ub(),g.Vb(5,"div",13),g.Rb(6,"br"),g.Ec(7),g.jc(8,"date"),g.Ub(),g.Ub()),2&e){var n=g.ic().$implicit;g.Eb(2),g.Fc(n.user),g.Eb(2),g.Fc(n.msgcontent),g.Eb(3),g.Gc(" ",g.lc(8,3,n.date,"short")," ")}}function v(e,t){if(1&e&&(g.Vb(0,"ion-row"),g.Cc(1,h,9,6,"ion-col",10),g.Cc(2,p,9,6,"ion-col",11),g.Ub()),2&e){var n=t.$implicit,s=g.ic();g.Eb(1),g.oc("ngIf",s.currentUser!==n.sessionId),g.Eb(1),g.oc("ngIf",s.currentUser===n.sessionId)}}var I,w,y,k=[{path:"",component:(I=function(){function t(n,s){e(this,t),this.sharedService=n,this.messageService=s}return n(t,[{key:"ngOnInit",value:function(){this.customerName=this.sharedService.getCustomerName().value,this.driverId=this.sharedService.getDriverId().value,this.customerId=this.sharedService.getCustomerId().value,this.currentUser=this.customerId,this.getMessage()}},{key:"getMessage",value:function(){var e=this;this.messageService.getAllMessage().subscribe(function(t){return Object(d.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var n,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter(function(e){return e.driverId==localStorage.getItem("userId")&&e.driverId==s.driverId&&e.userId==s.customerId});case 2:n=e.sent,this.listOfMessage=n.sort(function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()}),this.currentUser=localStorage.getItem("userId");case 4:case"end":return e.stop()}},e,this)}))})}},{key:"sendMessage",value:function(){var e=this,t={msgcontent:this.newMsg,date:new Date,userId:this.customerId,driverId:this.driverId,sessionId:localStorage.getItem("userId")};this.listOfMessage.push(t),this.listOfMessage.sort(function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()}),this.messageService.create(t).subscribe(function(t){console.log(t.toString()),e.getMessage()}),this.newMsg="",setTimeout(function(){e.content.scrollToBottom(200)})}}]),t}(),I.\u0275fac=function(e){return new(e||I)(g.Qb(f.a),g.Qb(m))},I.\u0275cmp=g.Kb({type:I,selectors:[["app-message"]],viewQuery:function(e,t){var n;1&e&&g.Ic(c.k,1),2&e&&g.uc(n=g.hc())&&(t.content=n.first)},decls:17,vars:4,consts:[["color","light"],["slot","start"],["defaultHref","detail"],[4,"ngFor","ngForOf"],["align-items-center","","no-padding",""],["size","10"],["autosize","","maxRows","4",1,"message-input",3,"ngModel","ngModelChange"],["size","2"],["expand","block","fill","clear","color","primary",1,"msg-btn",3,"disabled","click"],["name","send-outline"],["size","9","class","message other-message",4,"ngIf"],["offset","3","size","9","class","message my-message",4,"ngIf"],["size","9",1,"message","other-message"],["text-right","",1,"time"],["offset","3","size","9",1,"message","my-message"]],template:function(e,t){1&e&&(g.Vb(0,"ion-header"),g.Vb(1,"ion-toolbar",0),g.Vb(2,"ion-buttons",1),g.Rb(3,"ion-back-button",2),g.Ub(),g.Vb(4,"ion-title"),g.Ec(5),g.Ub(),g.Ub(),g.Ub(),g.Vb(6,"ion-content"),g.Vb(7,"ion-grid"),g.Cc(8,v,3,2,"ion-row",3),g.Ub(),g.Vb(9,"ion-footer"),g.Vb(10,"ion-toolbar"),g.Vb(11,"ion-row",4),g.Vb(12,"ion-col",5),g.Vb(13,"textarea",6),g.gc("ngModelChange",function(e){return t.newMsg=e}),g.Ub(),g.Ub(),g.Vb(14,"ion-col",7),g.Vb(15,"ion-button",8),g.gc("click",function(){return t.sendMessage()}),g.Rb(16,"ion-icon",9),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&e&&(g.Eb(5),g.Fc(t.customerName),g.Eb(3),g.oc("ngForOf",t.listOfMessage),g.Eb(5),g.oc("ngModel",t.newMsg),g.Eb(2),g.oc("disabled",""===t.newMsg))},directives:[c.p,c.K,c.i,c.e,c.f,c.I,c.k,c.o,o.m,c.n,c.C,c.j,a.a,a.i,a.k,c.h,c.q,o.n],pipes:[o.f],styles:[".message[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small}.msg-btn[_ngcontent-%COMP%]{--padding-start:0.5em;--padding-end:0.5em;margin-top:10px}.message-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--ion-color-medium);border-radius:10px;background:#fff;resize:none;padding-left:10px;padding-right:10px}"]}),I)}],M=((y=function t(){e(this,t)}).\u0275fac=function(e){return new(e||y)},y.\u0275mod=g.Ob({type:y}),y.\u0275inj=g.Nb({imports:[[u.j.forChild(k)],u.j]}),y),U=((w=function t(){e(this,t)}).\u0275fac=function(e){return new(e||w)},w.\u0275mod=g.Ob({type:w}),w.\u0275inj=g.Nb({imports:[[o.c,a.e,c.L,M,a.m]]}),w)},ldse:function(t,s,r){"use strict";r.d(s,"a",function(){return a});var i=r("2Vo4"),o=r("fXoL"),a=function(){var t=function(){function t(){e(this,t),this.restaurant=new i.a({}),this.status=new i.a({}),this.location=new i.a({}),this.orderId=new i.a({}),this.RestaurantLocation=new i.a({}),this.resId=new i.a({}),this.listOfCatagoryFilter=new i.a({}),this.deriverId=new i.a({}),this.customerId=new i.a({}),this.customerName=new i.a({})}return n(t,[{key:"getMenuFilter",value:function(){return this.listOfCatagoryFilter}},{key:"getLocation",value:function(){return this.location}},{key:"getStatus",value:function(){return this.status}},{key:"getRestaurantLocation",value:function(){return this.RestaurantLocation}},{key:"getRestaurantId",value:function(){return this.resId}},{key:"getDriverId",value:function(){return this.deriverId}},{key:"getCustomerId",value:function(){return this.customerId}},{key:"getCustomerName",value:function(){return this.customerName}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();